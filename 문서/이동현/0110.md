# Vue.js, Vuex?

### Vuex = Vue.js 애플리케이션에 대한 상태 관리 패턴 + 라이브러리

#### 1. 애플리케이션의 모든 컴포넌트에 대한 중앙 집중식 저장소 역할을 하며 예측 가능한 방식으로 상태를 변경 가능

#### 2. Vue의 공식 devtools 확장 프로그램과 통합되어 설정 시간이 필요      없는 디버깅 및 상태 스냅 샷 내보내기/가져오기 기능 제공





### Vuex는 3가지를 이해하면 쉽게 이해 가능

#### 1. 상태(State)

#### 2. 변이(Mutations)

#### 3. 액션(Actions)



#### 상태(State)

Vuex는 단일 상태 트리(단일 객체)를 사용

단일 상태 트리는 애플리케이션에서 사용하는 하나의 원본 데이터라고 생각

애플리케이션의 모든 컴포넌트들은 데이터가 필요할 때, 이 원본 데이터를 꺼내 사용



State를 Vue컴포넌트에 사용하려면

```
<script>
export default{
    name:'App',
    computed:{
        count() {
    return this.$store.state.count
        }
    }
}
</script>
```



#### 변이(Mutations)

변이는 Vuex 스토어에 있는 상태(State) 값을 변경하는 유일한 방법

변이를 사용하려면

##### 1. 변이 핸들러 생성

```
const store = new Vuex.Store({
    state:{
    count:0,
    },
    mutations:{
        increment(state) {
            state.count++;
        },
        decrement(state) {
            state.count--;
        },
    },
});
```

##### 2. 스토어의 commit 메서드로 변이 핸들러 호출

```
this.$store.commit('increment') //변이 핸들러 호출 
```

Vue 컴포넌트에서 스토어의 commit 메서드를 사용해서 변이 핸들러 호출

```
<template>
    <div id="app">
        <button @click="$store.commit('increment')">증가</button>
        <button @click="$store.commit('decrement')">감소</button>
        {{count}}
    </div>
<template>

<script>
export default{
    name:"App",
    computed: {
        count() {
            return this.$store.state.count;
        },
    },
};
</script>
```



커밋은 두 가지 방법으로 실행 가능



#### 페이로드(payload)를 가진 커밋

```
...
mutations: {
    increment(state, n=1) {
        state.count += n;
    },
}
```

```
<button @click="$store.commit('increment',3)">증가</button>
```

페이로드는 여러 필드를 포함할 수 있는 객체로 전달

```
...
mutations: {
    increment(state, payload) {
        state.count += payload.amount;
    },
}
```

```
this.$store.commit('increment', {
    amount:10
})
```



#### 객체 스타일 커밋

```
this.$store.commit({
    type:'increment',
    amount:10
})
```

객체 스타일 커밋을 사용할 때 전체 객체는 변이 핸들러에 페이로드로

전달되므로 핸들러는 동일하게 유지

```
mutations: {
    increment(state, payload) {
        state.count += payload.amount;
    },
}
```

```
<button @click="$store.commit({type:'increment', amount:3})">
증가
</button>
```



### 변이의 몇 가지 중요한 팁

#### 1. Vue 반응성 규칙을 따르자.

#### 2. 변이 타입으로 상수사용을 지향하자.

#### 3. 변이는 무조건 동기적이어야 한다.



#### 액션(Actions)

액션은 모든 과정이 끝났을 때 변이에 대한 커밋을 시킴

액션에서 모든 비동기 처리를 마치고 변이를 커밋함으로 Vuex 스토어의 데이터를 업데이트



```
const store = new Vuex.Store({
    state: {
        count:0
    },
    mutations: {
        increment(state) {
            state.count++
        }
    },
    actions: {
        increment(context) {
            context.commit('increment')
        }
    }
})
```



#### 디스패치 액션

```
store.dispatch('increment')


store.dispatch('incrementAsync', {
    amount: 10
})


store.dispatch({
    type: 'incrementAsync',
    amount: 10
})
```





#### Ps. 게터(Getters)

게터는 Vue 컴포넌트의 computed와 같음

```
const store = new Vuex.Store({
...
    getters: {
    postCount(state) {
    return state.posts.length;
        },
    }
});
```

게터는 state에 접근해서 계산된 속성으로 만들 수 있음

상태 값이 변경되면 자동으로 계산된 속성들이 업데이트 되는 것처럼

Vuex의 Getters도 state 값이 변경되면 자동으로 getter 변경
