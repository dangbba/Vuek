git conflict 해결



충돌 상황은 중앙 저장소에서 git pull시에 merge 하거나 master와 다른 branch(브랜치)에서 merge 하는 과정에서 일어난다. 먼저 merge에 대해서 알아야 하는데 merge는 우리 한국어로 말하자면 병합이다. 다른 기능을 만들 때 브랜치라는 것을 사용하는데 이러한 브랜치를 합치거나, 중앙 저장소에 있는 데이터와 로컬 저장소에 있는 데이터를 합칠 때 이용된다.



![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMjky/MDAxNTYxOTI2NDI3MTU3.PKSXIN0YciiPO4NEfYwRZ70BGhk-MqnhcHBHpm9yo0Mg.ahJOtRc1KtRH4MYWa05vvJlmJYla85qdYvKYmaB9gZ0g.PNG.asdf2017/image.png?type=w800)

B 개발자가 새로운 브랜치를 만들어서 디자인 작업을 했다고 해보자.

B 개발자의 head는 other function 브랜치가 된다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMTUz/MDAxNTYxOTI2NDcyMTU0.rMuOW9gpAncjWylEBjaVO4HiiZ2Rm7ESHHiiLAAYW6og.kFlXxoGvab9Z43bvRtAbp72zO6OTVX3g99w_ulDPvI8g.PNG.asdf2017/image.png?type=w800)

디자인 작업이 완료됐고,

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMTc0/MDAxNTYxOTI2NTYxNTI0.Nx4AETCh2OeEWj1NzIvHzk7ovr5a_s59deCErbHJphYg.HEcuzcKMb530VE4YOxg5eurESrT8mNlmZhXNq2TiGFog.PNG.asdf2017/image.png?type=w800) ![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMTUz/MDAxNTYxOTI2NjAyMzEx.CTeMGpnomfP12aurzkddjRQ8BuyzN0XwflEa91NP6v8g.S7aiC1oeFLICVrA1vHCcSWH8uhBF8V0LWdxI0d6Mt8cg.PNG.asdf2017/image.png?type=w800)

완료된 작업을 현재 head와 master branch와 merge ( 병합 ) 했다. 위의 오른쪽 사진처럼 잘 병합했다면 문제가 없다.

근데 대부분 다음과 같이 merge 충돌이 일어난다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMjQx/MDAxNTYxOTI2OTM1ODM1.SyYZ4QXGu6ZD8yIKtzJra6KVTRQkpFMFnN016420o1Yg.tieYLOIiIV2Y49yNyjwRcHL9vbK2ibjwU5ZlicCUAW8g.PNG.asdf2017/image.png?type=w800)

위와 같이 저장소가 잘 알려주는 것은 아니다 merge 충돌 났다고만 알려준다. 

어느 파일인지도 알려주는데, 이때 이 파일에 들어가서 수정하면 된다.



절차적인 방법은 이런데, 직접 해보면 또 다르다. 지금은 branch 만들어서 병합 과정에서 일어나는 충돌 과정 해결 방법보다.

git pull 에서 일어나는 충돌 과정을 가지고 실습을 해보도록 하겠다.



git pull - 충돌 상황

git pull 명령어는 중앙 저장소에 있는 데이터들을 가지고 오는 업데이트 명령어이다. 

동시에 현재 변경된 파일들, 새로 추가된 파일들을 merge 한다. 

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMTY1/MDAxNTYxOTI4NTcyODIy.dugE_4cjVvmg9wq1PbtC-a8jPWKpgtLo1zxUwejn-5kg.EkWDibPjKM6ubWyLuaDSky_aXhuBbiAh40owBjX1pFcg.PNG.asdf2017/image.png?type=w800)

git pull 같은 경우에는 위와 같이 B 개발자가 PC B 로컬 저장소에서 a.txt 와 resource.txt 파일을 수정했을 때, push 명령어를 통하여 중앙 저장소에 데이터를 업로드할 때 밑의 그림처럼 중앙 저장소에서 이미 업데이트된 데이터가 있으니, git pull해서 push 하라고 알려준다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfODgg/MDAxNTYxOTI4NzgzMzA0.7q4xkFVJTtjUcnWJkzJIP4G9J2YOajI_I7NcsTdhAUkg.eV7bFWVDhl4ysYYCKDYJH7K_3RC4k0Mcglfy8gCviQAg.PNG.asdf2017/image.png?type=w800)

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfOTUg/MDAxNTYxOTI5MTA1NjEz.pr_tLBqvs5EYDZ8dY2g4lZeluvWh_QXEG8Z7BlYHPpYg.h-kGnEI_h9PmaLOwLoEKoyAqoRFNvEIJaLzx4DWM8eEg.PNG.asdf2017/image.png?type=w800)

실제로 같은 상황에서 git push 할 때 위와 같이 출력될 것이다.

이때 merge 하지 않고 Local 저장소 데이터 자체를 중앙 저장소에 덮어쓰기 하는 방법은

$ git push -f

명령어이다. 이렇게 되면 중앙 저장소에 Local 저장소 데이터들이 덮여 쓰기 되면서 기존에 다른 사람이 업데이트 해놓은 데이터들이 싹 날아가 버린다.. 이 방법은 다양한 이유에서 사용한다. 만약 악의적인 행동으로 누군가가 중앙 저장소에 있는 데이터들을 날려버렸다던데.. 그렇게 된 상황에서 git push -f 를 많이 사용한다. 아니면 지금 중앙 저장소에 업데이트 된 데이터가 무의미하다면 말이다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMjE5/MDAxNTYxOTI5NDA2MjA0.NZ9nmgehMQf2uKFeDl4fMGZWw2zhQjbzj-cZujWqQWkg.quxFcAQCtBpdNz_OVlaYVdOEHB1gPcr5pDHtNUDCrNkg.PNG.asdf2017/image.png?type=w800)

되도록이면 -f 옵션은 쓰지 않는 것이 중요하다.



git pull - merge (자동 병합)

git pull은 아까도 말했다시피, 중앙 저장소에서 업데이트 된 데이터들을 Local 저장소에 가져오면서 자동 병합한다.

git pull 명령어를 입력하여 자동 병합이 되는지 확인해보자.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfNzcg/MDAxNTYxOTI5NzAxMTI1.hD_3WcuFNakAX9n0MnsIIhMPp00RU_nRZDgKVMI28-sg.xlodfSuAwz5ygB82Lm_MZTGGAY5AJuvjUH0NpcFo36Ig.PNG.asdf2017/image.png?type=w800)

git pull 명령어를 하니까 위와 같이 자세하게 자동 병합 실패했고, 충돌 나는 파일들을 집어주는 것을 확인할 수 있다. a.txt 파일이 충돌 난 것을 확인할 수 있다. 다음과 같이 git status를 이용해도 확인할 수 있다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMjg0/MDAxNTYxOTI5ODIzNDM2.SS4yRCO1HGDBv9Wn27Wg9fHlyi9VFPqj8hdke-rYaKMg.80BlURzL9s38PqE5jjcwhz6K6buIv3fwcnIRl5D4r5Ug.PNG.asdf2017/image.png?type=w800)

이제 충돌 난 파일 a.txt를 고쳐보도록 하자. vi 편집기로 a.txt 밑에 사진과 같이 확인할 수 있는데,

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMTc0/MDAxNTYxOTI5OTI0OTI5.CxhGXMn-Oho5vXmDiqAeIgcVGRoBruww3bCpzdaPUfQg.O10cW_np0XC20vt5cNNeqx_FrBn3mCiXL2QiiUmvEKAg.PNG.asdf2017/image.png?type=w800)

이렇게 되어있으면 충돌이 난 것인데 고쳐줘야 한다.

<<<<<<< HEAD  ## HEAD는 현재 브랜치를 뜻한다. git pull 했을 때는 단순하게 Local에 있는 데이터라고 생각하면 된다. ========== ## 여기까지가 중앙선 그 다음부터는 HEAD와 merge할 데이터들이다. >>>>>>>> { 숫자들이 마구 나오는데 commit 주소 값이 출력되는 것이다. } git pull 했을 때는 단순하게 중앙 저장소 데이터라고 생각하면 된다.

이제 어떻게 수정할 것인가? 기준을 정해주면 된다. head로 기준으로 해서 바꿔줄 것인가 아니면, 중앙 저장소 기준으로 해서 바꿔줄 것인가, 또 아니면 서로 섞어서 사용할 것인가 말이다. 만약 내가 Local 기준으로 수정할 것이면 ======== 에서부터 >>>> 여기까지 다 지워준 뒤 맨 위에 <<<< head 부분 없애고 수정하면 된다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfNjQg/MDAxNTYxOTMwMzExMjc5.ruzPXJefHJQrN8pgrSAjLr73RfY8a_oQ0NE0a3jOpSEg.kcFy0TIPZWpmIBoFerKvqLf7mb0iSXDdTHwoTPZFy78g.PNG.asdf2017/image.png?type=w800)

수정 후에 git add --all 후에 git commit -a 를 해준다. 명령어를 차례대로 입력하고 나면 밑의 사진처럼 Merge 메시지를 쓸 수 있다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMjE4/MDAxNTYxOTMwNDM3NDUy.v62WOee_V_iHQGjKhDdO-h-K8tHoCbyO3u9oW5ia4tQg.RJ9CFAdyrLgnqjkm_almQFw-CSJ5purjIQIn68FleN8g.PNG.asdf2017/image.png?type=w800)

머지 메시지도 입력하고 나서 git push를 해주면 끝이다. 

git push 이후에 중앙 저장소에 데이터가 정상적으로 올라갔는지 밑에 사진과 같이 확인할 수 있었다.

![img](https://mblogthumb-phinf.pstatic.net/MjAxOTA3MDFfMTk1/MDAxNTYxOTMwODMxNTc5.7Xq4v0op8qiH9bJH7yNVvfTH9NNZYu5J_tA7-0ZheQEg.OHzpxdOwx2lTkCVX-S9AYxUGLbHnEkPbJiZHN3tODVog.PNG.asdf2017/image.png?type=w800)