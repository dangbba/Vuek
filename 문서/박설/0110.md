### 0110 스프링 프로젝트 구조

## domain

- db의 테이블과 직접적으로 맵핑되는 클래스 입니다.
- jpa 사용시 여러 어노테이션을 사용하여 테이블, 필드, 필드 옵션 등을 설정하게 됩니다.

domain 클래스에서 자주 사용되는 몇가지 어노테이션

- @Entity - 테이블과 1:1로 맵핑되는 어노테이션으로 해당 어노테이션을 클래스에 붙이면 jpa가 해당 클래스를 관리하게 됩니다.
- @Column - 필드에 붙이는 어노테이션으로 해당 어노테이션을 붙이면 컬럼으로 인식하게 됩니다.
- @Id - PK를 지정하는 어노테이션 입니다.
- @GeneratedValue - pk가 중복되는것을 방지하기 위해 작성하는 어노테이션 입니다. strategy 파라미터로 GenerationType.IDENTITY를 주게되면 PK로 인식하여 Auto Increament로 설정됩니다.
- @Builder - Builder 패턴을 사용하기 위한 어노테이션 입니다. @Builder 어노테이션을 사용하게되면 객체를 생성할때 생성자를 통해서 객체를 생성하는게 아니라 도메인.builder().필드(값).필드(값).build(); 를 통해 필드에 대한 값을 좀더 명시적으로 넣어 줄 수 있습니다.

## Repository

- repository는 DB에 접근하는 소스코드를 모아둔 Interface 입니다.
- JPA를 사용하게되면 JpaRepository 인터페이스를 상속받아 제네릭을 통해 관리하고자 하는 클래스, ID필드 타입을 <Posts, Long>와 같이 넣어주게되면 자동으로 DB와 CRUD 연결을 할 수 있는 메소드를 생성해 줍니다.
- 다만 Create, Update, Delete와 같은 경우에는 다른 테이블간의 조인 을 잘 수행하지 않기 때문에 그대로 사용 하지만 Read와 같은 경우엔 여러 테이블과 조인 연산이 필요한 경우가 많이 때문에 @Query 어노테이션으로 직접 쿼리를 작성하여 사용하거나 querydsl과 같은 동적쿼리를 생성해주는 라이브러리를 같이 사용하게 됩니다.

> 동적 쿼리란 ? 미리 작성해둔 SQL이 아니라 코드 실행 시점에 동적으로 구성되고 실행되는 쿼리입니다.

## DTO (db.entity)

- DTO는 Data Transfer Object로 직역하면 데이터 전송 객체이다.
- Service나 Controller에서 DB에 접근할때 사용하는 클래스 입니다.
- 위에서 설명한 Domain 클래스와 다른게 무엇인지 의문을 품을수 있는데 Domain은 DB 테이블에 대한 정보를 가지고 있는 클래스이고 DTO는 해당 테이블에서 실제로 CRUD를 할 필드를 정의해둔것이라고 보면 된다.
- 이렇게 Domain과 DTO를 나누어서 사용하는 이유는 소스코드 작성중에 디비에 접근할 필드의 변경이 생겼을 경우 Domain을 변경하여 디비에 접근 하는 경우 디비 테이블 설정을 접근하는 경우가 되어 큰 문제를 일으킬수 있습니다.
- 그로인해 테이블에 대한 정보를 작성하는 Domain 클래스와 디비에 접근하는 필드에 관한 클래스를 작성하는 DTO 클래스를 사용하게 됩니다.
- Domain과 마찬가지로 Builder 패턴을 사용 할 수 있습니다.

## Service

- Repository와 DTO를 통해 DB에 접근하여 CRUD의 각각의 프로세스 관리와 에러처리 등을 담당하는 역할을 합니다.
- @Service 어노테이션을 붙여주게 되면 스프링 빈에 등록되고 스프링에서 관리하는 객체가 됩니다.
- DB와 실제적인 접근을 명령하는 소스코드를 작성하는 클래스입니다.
- DTO에 작성된 메소드를 기반으로 소스코드를 작성하게 됩니다.

## Controller

- 제일 앞단에서 HTTP 요청과 응답을 위한 클래스 입니다.
- @Controller 어노테이션을 붙여주면 스프링 빈에 등록되고 스프링에서 관리하는 객체가 됩니다.
- @GetMapping(“주소”) 와같이 http 메소드 명과 함께 주소를 작성해주게 되면 해당 주소로 요청을 받을수 있게 됩니다.
- Service를 사용하여 디비에 접근하게 되고 model을 사용하여 파라미터를 view단으로 넘길수 있고 template 이름만 문자열로 반환하게 되면 View Resolver가 자동으로 해당 template를 찾아 사용자에게 페이지를 보여주게됩니다.



## Request / Response

- 데이터 클래스

  

데이터 클래스- request, response, model이 이 데이터 클래스에 해당한다. 데이터 클래스는 아무 기능도 하지 않는 말 그대로 데이터 그 자체라고 생각하면 된다.

데이터처리 클래스 - 데이터처리는 controller, service, jpa repository등을 포함한다. 데이터 클래스를 가지고 이것 저것 바꾸고, 더하고, 빼고 디비에 넣는 등 다양한 작업을 한다.

