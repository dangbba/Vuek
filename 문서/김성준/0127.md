## spring 과 spa route 설정

- 현재 : 브라우저창에 URL을 입력하면 서버에서 해당 URL 매핑 정보를 찾아 페이지를 리턴하는 방식
  - 표시는 가능한데 직접 URL창에 접속하려고 하면 404에러 발생

```
URL에 접속하려면 index.html에 접근 가능해야 하는데, 기본적으로 URL을 입력하면 서버 접속을 먼저 시도하며, 서버측에서 해당 URL에 대해 특별한 매핑이 되지 않았으므로 페이지가 없다는 404 결과를 리턴
```

- 해결책 : 서버 URL에 대체 경로를 추가

  - mvcConfig 에 url 설정하는 방법

  ```java
  import java.io.IOException;
  import org.springframework.context.annotation.Configuration;
  import org.springframework.core.io.ClassPathResource;
  import org.springframework.core.io.Resource;
  import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
  import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
  import org.springframework.web.servlet.resource.PathResourceResolver;
  @Configuration
  public class WebMvcConfig implements WebMvcConfigurer {
      @Override
      public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/**/*")
          .addResourceLocations("classpath:/static/")
          .resourceChain(true)
          .addResolver(new PathResourceResolver() {
              @Override
              protected Resource getResource(String resourcePath,
                  Resource location) throws IOException {
                  Resource requestedResource = location.createRelative(resourcePath);
                  return requestedResource.exists() && requestedResource.isReadable() ? requestedResource
                  : new ClassPathResource("/static/index.html");
              }
          });
      }
  }
  // swagger 페이지를 향하는 요청 또한 index로 전달하여 해당 페이지를 사용하지 못하는 문제점 발생
  ```

  

  - 에러 Controller를 작성하여 404 발생 시 static/index.html 로 경로를 지정하는 방법

