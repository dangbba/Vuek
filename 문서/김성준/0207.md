## 에러

시큐리티를 적용한 JWT 방식의 로그인 구현 문제

현재 로그인 시  토큰 값을 받는 것은 request.getHeader를 통해 확인. 하지만 시큐리티에서 어떤문제 인지 인증을 요청한 사용자의 요청을 Athentication 객체에 담아주지 않고 null 값이 나오는 것으로 확인  그로인해 회원 정보 조회 같은 기능 구현이 안되는 중

```
2022-02-07 15:04:15.759 ERROR 5640 --- [0.1-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause

java.lang.NullPointerException: null
	at com.ssafy.api.controller.UserController.getUserInfo(UserController.java:75) ~[main/:na]
	
```

- 필터

  ```
      // If header does not contain BEARER or is null delegate to Spring impl and exit
      if (header == null || !header.startsWith(JwtTokenUtil.TOKEN_PREFIX)) {
          filterChain.doFilter(request, response);
          return;
  ```

  토큰을 받아올 때 Bearer를 지키지 않아 authtication에 객체 정보가 받아짖지 않은 것

  해결책 -	코드 수정보다는 필터를 삭제하고 service와 imple을 사용하여 Jwt를 적용하는 방법으로 전환

  

- Jwt 오류(io.jsonwebtoken.lang.UnknownClassException: Unable to load class named [io.jsonwebtoken.impl.DefaultJwtBuilder

  - 원인 -의존성 에러

  ```
  // jwt
  implementation 'io.jsonwebtoken:jjwt-api:0.10.7'
  
  //오류 해결을 위해 추가로 넣은 의존성
  runtime 'io.jsonwebtoken:jjwt-impl:0.10.7'
  runtime 'io.jsonwebtoken:jjwt-jackson:0.10.7'
  ```

- The signing key's size is 240 bits which is not secure enough for the HS256 algorithm.

  - 원인 - **확인 키의 크기가 240비트이며 HS256 알고리즘에 대해 충분히 안전하지 않습니다.**

```
    private static final String SALT = "ssafySecretKeyProjectTestTokenHellOBYye";
 키값 추가 작성
```

